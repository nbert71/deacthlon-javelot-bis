<!doctype html>
<html lang="fr">

<head>
    <meta charset="utf-8">
    <title>Javelot</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Barlow+Semi+Condensed:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/purecss@2.0.6/build/pure-min.css"
        integrity="sha384-Uu6IeWbM+gzNVXJcM9XV3SohHtmWE+3VGi496jvgX1jyvDTXfdK+rfZc8C1Aehk5" crossorigin="anonymous">

    <link href="main.css" rel="stylesheet">

</head>

<body>
    <div class="main">
        <div class="pure-g">
            <div class="pure-u-5-24"></div>
            <div class="pure-u-14-24 title" style="font-family: 'Barlow Semi Condensed', sans-serif;font-weight: 900;">
                Lancer de Javelot</div>
            <div class="pure-u-5-24"></div>

            <div class="pure-u-1-3"></div>
            <div class="pure-u-1-3">
                <input type="text" id="pseudo" placeholder="Pseudo...">
            </div>
            <div class="pure-u-1-3"></div>

            <div class="pure-u-1-3"></div>
            <div class="pure-u-1-3">
                <div class="pure-button" id="new-game">Nouvelle partie</div>
            </div>
            <div class="pure-u-1-3"></div>

            <div class="pure-u-1-3"></div>
            <div class="pure-u-1-3">
                <a class="pure-button" id="jouer" href="./game.html">Jouer !</a>
            </div>
            <div class="pure-u-1-3"></div>
        </div>
    </div>
</body>

<script>
    function getCookie(name) {
        var cookie, c;
        cookies = document.cookie.split('; ');
        for (var i = 0; i < cookies.length; i++) {
            c = cookies[i].split('=');
            if (c[0] == name) {
                return c[1];
            }
        }
        return "";
    }

    document.querySelector('#new-game').addEventListener("click", (event) => {
        pseudo = document.querySelector("#pseudo").value;
        if (pseudo !== '') {
            fetch("/new/?pseudo=" + pseudo)
                .then(cookie => {
                    document.cookie = cookie;
                    console.log("getcookie", getCookie("id_partie"));
                    fetch("/cookie/?id_partie=" + getCookie("id_partie"))
                });
            

            document.querySelector('#jouer').style.display = 'block';
        } else {
            alert("Vous devez saisir un pseudo pour cr√©er une partie !");
        }

        //event.preventDefault();
        //location.reload();
    })
</script>

</html>